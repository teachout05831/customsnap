# Website Builder Platform Architecture

## Overview

A website builder that integrates with your **SaaS product** (job management, CRM, operations software). The website builder generates marketing sites for your SaaS customers that connect directly to their SaaS dashboard - leads, bookings, and customer inquiries flow straight into their account.

**Key Insight**: The website builder is a **feature of your SaaS**, not a standalone product. It adds value by giving your customers a professional web presence that feeds directly into their operations software.

---

## How It Fits Together

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           YOUR BUSINESS                                      │
├─────────────────────────────────┬───────────────────────────────────────────┤
│                                 │                                           │
│   YOUR SAAS PRODUCT             │   WEBSITE BUILDER (This Project)          │
│   (Separate Codebase)           │                                           │
│                                 │                                           │
│   ┌─────────────────────────┐   │   ┌─────────────────────────────────┐    │
│   │  app.yoursaas.com       │   │   │  Generated Websites              │    │
│   │                         │   │   │                                  │    │
│   │  • Jobs/Work Orders     │◀──┼───│  customer-site.com               │    │
│   │  • Customer CRM         │   │   │                                  │    │
│   │  • Scheduling           │   │   │  • [Get Quote] ──────────────────┼───▶│
│   │  • Invoicing            │   │   │  • [Book Now] ───────────────────┼───▶│
│   │  • Employee Management  │   │   │  • [Contact Us] ─────────────────┼───▶│
│   │  • Reports              │   │   │                                  │    │
│   │                         │───┼──▶│  • Displays reviews from SaaS    │    │
│   │  Multi-tenant:          │   │   │  • Shows availability            │    │
│   │  Each company has own   │   │   │  • Pulls services list           │    │
│   │  isolated data          │   │   │                                  │    │
│   │                         │   │   │  Static HTML + JS that calls     │    │
│   │  Database: jobs,        │   │   │  your SaaS API                   │    │
│   │  customers, invoices,   │   │   │                                  │    │
│   │  companies, etc.        │   │   │  Generated by Claude Code        │    │
│   └─────────────────────────┘   │   └─────────────────────────────────┘    │
│                                 │                                           │
└─────────────────────────────────┴───────────────────────────────────────────┘
```

---

## System Architecture (Website Builder)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      WEBSITE BUILDER PLATFORM                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌────────────┐  │
│   │   Web App   │    │    API      │    │  Database   │    │  Storage   │  │
│   │  (Frontend) │───▶│  (Backend)  │───▶│ (Postgres)  │    │ (S3/R2)    │  │
│   └─────────────┘    └──────┬──────┘    └─────────────┘    └────────────┘  │
│                             │                                               │
│                             ▼                                               │
│                    ┌─────────────────┐                                      │
│                    │  Claude Code    │                                      │
│                    │  Integration    │                                      │
│                    │  (Generation)   │                                      │
│                    └────────┬────────┘                                      │
│                             │                                               │
│                             ▼                                               │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │              Output / Preview  (with SaaS Integration)               │  │
│   │                       output/[project-id]/                           │  │
│   │                                                                      │  │
│   │   • Forms POST to SaaS API (leads, bookings)                        │  │
│   │   • JS fetches reviews, availability from SaaS                      │  │
│   │   • Booking widget embedded from SaaS                               │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                             │                                               │
│                             ▼                                               │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                    Hosting Infrastructure                            │  │
│   │  ┌──────────────┐  ┌──────────────┐  ┌───────────────────────────┐  │  │
│   │  │ Free Tier    │  │ Basic Tier   │  │ Premium Tier              │  │  │
│   │  │ *.platform   │  │ Custom Domain│  │ External (Vercel/Netlify) │  │  │
│   │  │ .com         │  │ Your Servers │  │ Best SEO Performance      │  │  │
│   │  └──────────────┘  └──────────────┘  └───────────────────────────┘  │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Why Claude Code as the Engine?

| Aspect | Custom Template Builder | Claude Code |
|--------|------------------------|-------------|
| Design flexibility | Limited to your templates | Infinite - designs from scratch |
| Understanding requests | Rigid forms/options | Natural language |
| Problem solving | Only what you programmed | Figures things out, adapts |
| Iteration | "Pick from these 5 options" | "Make the header bigger" |
| Development time | Months to build | Already exists |

**Your value-add**: Workflow, hosting, user accounts, billing - not the generation itself.

---

## Folder Structure

```
Web Site Builder/
│
├── platform/                         # Your web application
│   ├── frontend/                     # User-facing app
│   │   ├── src/
│   │   │   ├── pages/
│   │   │   │   ├── dashboard/        # User dashboard
│   │   │   │   ├── builder/          # Project creation flow
│   │   │   │   ├── preview/          # Site preview interface
│   │   │   │   └── settings/         # Domain, billing, account
│   │   │   ├── components/
│   │   │   └── lib/
│   │   └── package.json
│   │
│   ├── backend/                      # API server
│   │   ├── src/
│   │   │   ├── routes/
│   │   │   │   ├── projects.js       # CRUD for projects
│   │   │   │   ├── generation.js     # Trigger Claude Code
│   │   │   │   ├── publish.js        # Publish to hosting
│   │   │   │   └── domains.js        # Domain management
│   │   │   ├── services/
│   │   │   │   ├── claude-code.js    # Claude Code integration
│   │   │   │   ├── hosting.js        # Hosting management
│   │   │   │   └── dns.js            # DNS verification
│   │   │   └── db/
│   │   │       └── schema.sql
│   │   └── package.json
│   │
│   └── shared/                       # Shared types/utils
│
├── generation/                       # Claude Code workspace
│   ├── prompts/                      # System prompts for Claude Code
│   │   ├── base-system-prompt.md     # Core instructions
│   │   ├── style-guide.md            # Design principles
│   │   └── output-format.md          # Required file structure
│   │
│   └── output/                       # Generated sites land here
│       └── [project-id]/             # Each project folder
│           ├── index.html
│           ├── pages/
│           │   ├── about.html
│           │   ├── services.html
│           │   └── contact.html
│           ├── css/
│           │   └── styles.css
│           ├── js/
│           │   └── main.js
│           ├── assets/
│           │   └── images/
│           └── site.json             # Manifest for the site
│
├── hosting/                          # Hosting infrastructure
│   ├── server/                       # Static file server
│   │   ├── index.js                  # Main server
│   │   ├── router.js                 # Domain routing
│   │   └── ssl.js                    # SSL management
│   │
│   ├── storage/                      # Published sites (production)
│   │   └── [site-id]/                # Production files
│   │
│   └── deploy/                       # External deployment scripts
│       ├── netlify.js
│       ├── vercel.js
│       └── cloudflare.js
│
└── docs/
    └── api.md
```

---

## User Flow

### 1. Project Creation (Intake)

```
User lands on platform
        │
        ▼
┌───────────────────┐
│ "Create New Site" │
└─────────┬─────────┘
          │
          ▼
┌───────────────────────────────────────────────────┐
│              Intake Questionnaire                  │
│                                                    │
│  • What type of site? (portfolio, business, etc)  │
│  • What's your business/project about?            │
│  • Who is your target audience?                   │
│  • What's the vibe? (modern, playful, corporate)  │
│  • Any specific colors or style preferences?      │
│  • What pages do you need?                        │
│  • Do you have a logo? (upload)                   │
│  • Any reference sites you like?                  │
└─────────┬─────────────────────────────────────────┘
          │
          ▼
   Answers saved to database
   Project created with status: "pending_generation"
```

### 2. Site Generation (Claude Code)

```
┌─────────────────────────────────────────────────────────────────┐
│                     Your Backend                                 │
│                                                                  │
│  1. Fetch project details from database                         │
│  2. Build prompt from user's answers                            │
│  3. Include system prompt (style guide, output format)          │
│  4. Invoke Claude Code with the prompt                          │
│                                                                  │
└──────────────────────────┬──────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Claude Code                                 │
│                                                                  │
│  Receives prompt like:                                          │
│                                                                  │
│  "Create a website with the following requirements:             │
│   - Type: Photography portfolio                                  │
│   - About: Sarah Chen, wedding photographer in Austin            │
│   - Vibe: Minimal, elegant, lots of whitespace                  │
│   - Colors: Black, white, gold accents                          │
│   - Pages: Home, Portfolio, About, Contact                      │
│                                                                  │
│   Output to: generation/output/proj_abc123/                     │
│   Follow the structure defined in output-format.md"             │
│                                                                  │
│  Claude Code generates:                                         │
│   ├── index.html                                                │
│   ├── pages/portfolio.html                                      │
│   ├── pages/about.html                                          │
│   ├── pages/contact.html                                        │
│   ├── css/styles.css                                            │
│   ├── js/main.js                                                │
│   └── site.json                                                 │
│                                                                  │
└──────────────────────────┬──────────────────────────────────────┘
                           │
                           ▼
                  Project status → "ready_for_preview"
```

### 3. Preview & Iteration

```
┌─────────────────────────────────────────────────────────────────┐
│                    Preview Interface                             │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                                                           │  │
│  │              [Live Preview of Generated Site]             │  │
│  │                                                           │  │
│  │                     (iframe from output/)                 │  │
│  │                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ Request Changes:                                         │    │
│  │                                                          │    │
│  │ "Make the header text larger and change the gold        │    │
│  │  accent to rose gold. Also add a testimonials           │    │
│  │  section to the home page."                              │    │
│  │                                                          │    │
│  │                              [Submit Changes]            │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│        [Request Changes]    [Approve & Publish]                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
          │                            │
          ▼                            ▼
   Back to Claude Code          Move to Publishing
   for revisions
```

### 4. Publishing

```
User clicks "Publish"
        │
        ▼
┌───────────────────────────────────────┐
│       Choose Hosting Tier             │
│                                       │
│  ○ Free - yoursite.platform.com       │
│    (Good for testing, portfolios)     │
│                                       │
│  ○ Basic ($12/mo) - Custom domain     │
│    yoursite.com (we host)             │
│                                       │
│  ○ Premium ($29/mo) - Custom domain   │
│    with SEO-optimized hosting         │
│    (Vercel/Netlify/Cloudflare)        │
│                                       │
└─────────────────┬─────────────────────┘
                  │
                  ▼
        ┌─────────────────┐
        │  DNS Setup      │  (for custom domains)
        │  Instructions   │
        └────────┬────────┘
                 │
                 ▼
            Site goes live!
```

---

## Hosting Tiers & SEO Implications

### SEO Breakdown

| Hosting Type | SEO Impact | Best For |
|--------------|------------|----------|
| `site.yourplatform.com` | Low - tied to your domain | Testing, hobby projects |
| Custom domain (your servers) | Medium - their own authority | Small businesses |
| Custom domain (Vercel/Netlify) | Best - premium CDN, edge | SEO-focused businesses |

### Tier Details

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           HOSTING TIERS                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  TIER 1: FREE                                                           │
│  ─────────────                                                          │
│  URL: mysite.yourplatform.com                                           │
│  Hosting: Your infrastructure (shared)                                  │
│  SSL: Auto (wildcard cert)                                              │
│  SEO: Limited (subdomain of your domain)                                │
│  Use case: Preview, testing, casual users                               │
│                                                                         │
│  TIER 2: BASIC ($12/mo)                                                 │
│  ──────────────────────                                                 │
│  URL: theircustomdomain.com                                             │
│  Hosting: Your infrastructure (dedicated routing)                       │
│  SSL: Auto (Let's Encrypt)                                              │
│  SEO: Good (own domain authority)                                       │
│  Use case: Small businesses, personal brands                            │
│                                                                         │
│  TIER 3: PREMIUM ($29/mo)                                               │
│  ─────────────────────────                                              │
│  URL: theircustomdomain.com                                             │
│  Hosting: External (Vercel/Netlify/Cloudflare Pages)                    │
│  SSL: Auto (provider handles)                                           │
│  SEO: Best (premium CDN, edge locations, fast)                          │
│  Use case: Businesses serious about SEO & performance                   │
│                                                                         │
│  TIER 4: AGENCY ($99/mo)                                                │
│  ─────────────────────────                                              │
│  Everything in Premium plus:                                            │
│  - Unlimited sites                                                      │
│  - White-label (no "built with" badge)                                  │
│  - API access                                                           │
│  - Priority support                                                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Database Schema

```sql
-- Users
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255),
    plan VARCHAR(50) DEFAULT 'free',  -- free, basic, premium, agency
    stripe_customer_id VARCHAR(255),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Projects (websites being built)
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    name VARCHAR(255) NOT NULL,
    status VARCHAR(50) DEFAULT 'draft',
    -- draft, pending_generation, ready_for_preview, approved, published

    -- Intake data (from questionnaire)
    site_type VARCHAR(100),           -- portfolio, business, landing, blog
    description TEXT,                  -- what the site is about
    target_audience TEXT,
    style_preferences JSONB,           -- { colors, vibe, references }
    pages JSONB,                       -- ["home", "about", "contact"]

    -- Generation tracking
    generation_attempts INT DEFAULT 0,
    last_generated_at TIMESTAMP,

    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Revisions (change requests during preview)
CREATE TABLE revisions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    request TEXT NOT NULL,             -- user's change request
    status VARCHAR(50) DEFAULT 'pending',  -- pending, processing, completed
    created_at TIMESTAMP DEFAULT NOW()
);

-- Published Sites
CREATE TABLE sites (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    user_id UUID REFERENCES users(id),

    -- Hosting info
    subdomain VARCHAR(100) UNIQUE,     -- for free tier
    custom_domain VARCHAR(255) UNIQUE, -- for paid tiers
    hosting_tier VARCHAR(50),          -- free, basic, premium

    -- External hosting (premium tier)
    external_provider VARCHAR(50),     -- netlify, vercel, cloudflare
    external_site_id VARCHAR(255),
    external_url VARCHAR(500),

    -- SSL
    ssl_provisioned BOOLEAN DEFAULT FALSE,
    ssl_expires_at TIMESTAMP,

    -- Status
    status VARCHAR(50) DEFAULT 'active',  -- active, suspended, deleted

    published_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Assets (uploaded images, logos)
CREATE TABLE assets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    filename VARCHAR(255),
    storage_path VARCHAR(500),         -- path in S3/R2
    file_type VARCHAR(50),
    file_size INT,
    uploaded_at TIMESTAMP DEFAULT NOW()
);
```

---

## Claude Code Integration

### System Prompts

Claude Code receives two key prompt files:

1. **base-system-prompt.md** - General website generation instructions
2. **seo-requirements.md** - Comprehensive SEO standards (see `generation/prompts/seo-requirements.md`)

#### Base System Prompt (generation/prompts/base-system-prompt.md)

```markdown
# Website Generation Instructions

You are generating a complete, production-ready website. Follow these rules
AND all requirements in seo-requirements.md.

## Output Structure
Always output files to the specified project directory:
- index.html (main page)
- pages/ (additional HTML pages)
- css/styles.css (all styles in one file)
- js/main.js (all JavaScript in one file)
- assets/images/ (reference placeholder images)
- robots.txt (SEO - required)
- sitemap.xml (SEO - required)
- site.json (manifest file)

## Code Standards
- Clean, semantic HTML5
- Modern CSS (flexbox, grid, custom properties)
- Vanilla JavaScript only (no frameworks)
- Mobile-first responsive design
- Accessible (ARIA labels, alt text, semantic elements)
- All internal links must work (relative paths)

## SEO Requirements (CRITICAL)
Follow ALL requirements in seo-requirements.md, including:
- Core Web Vitals targets (LCP ≤2.5s, INP ≤200ms, CLS ≤0.1)
- Unique title tags (50-60 chars) and meta descriptions (150-160 chars)
- One H1 per page, logical heading hierarchy
- JSON-LD structured data (LocalBusiness or appropriate schema)
- Open Graph and Twitter Card meta tags
- Image optimization (alt text, width/height attributes)
- robots.txt and sitemap.xml files

## Design Principles
- Generous whitespace
- Clear visual hierarchy
- Consistent spacing (8px grid)
- Maximum 2 font families
- WCAG AA contrast ratios

## site.json Format
{
  "name": "Site Name",
  "description": "Brief description",
  "pages": ["index.html", "pages/about.html"],
  "primaryColor": "#hex",
  "secondaryColor": "#hex",
  "generatedAt": "ISO date",
  "editableSections": ["hero", "about", "services"]
}

## Placeholder Images
Use https://placehold.co/ for placeholder images.
Example: https://placehold.co/800x600/1a1a1a/ffffff?text=Hero+Image
Always include width and height attributes to prevent CLS.

## Forms
Include proper form structure but no backend processing needed.
Forms should have validation attributes, clear labels, and ARIA attributes.
```

### Integration Code (platform/backend/src/services/claude-code.js)

```javascript
import { spawn } from 'child_process';
import { readFile } from 'fs/promises';
import path from 'path';

const GENERATION_DIR = path.resolve('generation/output');
const PROMPTS_DIR = path.resolve('generation/prompts');

export async function generateWebsite(project) {
  const systemPrompt = await readFile(
    path.join(PROMPTS_DIR, 'base-system-prompt.md'),
    'utf-8'
  );

  const userPrompt = buildPrompt(project);
  const outputDir = path.join(GENERATION_DIR, project.id);

  // Invoke Claude Code CLI
  await runClaudeCode(`
    ${systemPrompt}

    ---

    ${userPrompt}

    Output all files to: ${outputDir}
  `);

  // Verify generation succeeded
  const siteJson = await readFile(
    path.join(outputDir, 'site.json'),
    'utf-8'
  );

  return JSON.parse(siteJson);
}

export async function requestRevision(project, changeRequest) {
  const outputDir = path.join(GENERATION_DIR, project.id);

  await runClaudeCode(`
    The user has requested the following changes to their website:

    "${changeRequest}"

    The website files are in: ${outputDir}

    Make these changes while maintaining the overall design consistency.
    Update site.json if you add new pages or change colors.
  `);
}

function buildPrompt(project) {
  return `
Create a website with these specifications:

**Type**: ${project.site_type}
**Name**: ${project.name}
**Description**: ${project.description}
**Target Audience**: ${project.target_audience}

**Style Preferences**:
- Vibe: ${project.style_preferences.vibe}
- Colors: ${project.style_preferences.colors?.join(', ') || 'Use good defaults'}
- Reference sites: ${project.style_preferences.references?.join(', ') || 'None'}

**Pages Needed**: ${project.pages.join(', ')}

${project.style_preferences.additionalNotes || ''}
  `.trim();
}

function runClaudeCode(prompt) {
  return new Promise((resolve, reject) => {
    const process = spawn('claude', ['--print', '--prompt', prompt], {
      stdio: ['pipe', 'pipe', 'pipe']
    });

    let output = '';
    process.stdout.on('data', (data) => output += data);
    process.stderr.on('data', (data) => console.error(data.toString()));

    process.on('close', (code) => {
      if (code === 0) resolve(output);
      else reject(new Error(`Claude Code exited with code ${code}`));
    });
  });
}
```

---

## Hosting Implementation

### Tier 1 & 2: Your Infrastructure

```javascript
// hosting/server/router.js
import express from 'express';
import path from 'path';
import { db } from './db.js';

const app = express();

app.use(async (req, res, next) => {
  const host = req.hostname;

  // Check for custom domain (Tier 2)
  let site = await db.sites.findByCustomDomain(host);

  // Check for subdomain (Tier 1)
  if (!site && host.endsWith('.yourplatform.com')) {
    const subdomain = host.split('.')[0];
    site = await db.sites.findBySubdomain(subdomain);
  }

  if (site && site.status === 'active') {
    const sitePath = path.join('hosting/storage', site.id);
    return express.static(sitePath)(req, res, next);
  }

  next();
});
```

### Tier 3: External Deployment

```javascript
// hosting/deploy/vercel.js
import { execSync } from 'child_process';
import { db } from '../db.js';

export async function deployToVercel(siteId, customDomain) {
  const sitePath = `hosting/storage/${siteId}`;

  // Deploy using Vercel CLI
  const result = execSync(
    `vercel ${sitePath} --prod --yes`,
    { encoding: 'utf-8' }
  );

  // Extract deployment URL
  const deploymentUrl = result.trim().split('\n').pop();

  // If custom domain, add it
  if (customDomain) {
    execSync(`vercel domains add ${customDomain}`);
  }

  // Update database
  await db.sites.update(siteId, {
    external_provider: 'vercel',
    external_url: deploymentUrl,
    hosting_tier: 'premium'
  });

  return deploymentUrl;
}

// Similar functions for Netlify and Cloudflare Pages
```

---

## SaaS Integration

The website builder connects to your main SaaS product. Generated websites call your SaaS API to send leads and display dynamic data.

### Integration Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         INTEGRATION FLOW                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   WEBSITE → SAAS (Forms/Actions)                                            │
│   ───────────────────────────────                                           │
│                                                                             │
│   [Get Quote Form]  ──POST──▶  /api/v1/leads         ──▶  Lead in CRM      │
│   [Book Now]        ──POST──▶  /api/v1/bookings      ──▶  Job scheduled    │
│   [Contact Form]    ──POST──▶  /api/v1/inquiries     ──▶  Notification     │
│                                                                             │
│   SAAS → WEBSITE (Dynamic Data)                                             │
│   ─────────────────────────────                                             │
│                                                                             │
│   Reviews section   ◀──GET───  /api/v1/public/reviews                       │
│   Availability      ◀──GET───  /api/v1/public/availability                  │
│   Services list     ◀──GET───  /api/v1/public/services                      │
│   Testimonials      ◀──GET───  /api/v1/public/testimonials                  │
│                                                                             │
│   EMBEDDED WIDGETS                                                          │
│   ────────────────                                                          │
│                                                                             │
│   <div id="booking-widget"></div>                                           │
│   <script src="https://yoursaas.com/widget.js"                             │
│           data-company="abc-movers"></script>                               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Updated site.json with SaaS Config

```json
{
    "name": "ABC Movers",
    "description": "Professional moving services in Austin",
    "pages": ["index.html", "pages/about.html", "pages/services.html", "pages/contact.html"],
    "primaryColor": "#2563eb",
    "secondaryColor": "#1e40af",
    "generatedAt": "2026-01-19",

    "saasIntegration": {
        "enabled": true,
        "companyId": "comp_abc123",
        "publicKey": "pk_live_xxxxxxxxxxxxx",
        "apiBase": "https://api.yoursaas.com/v1",

        "features": {
            "leadCapture": true,
            "bookingWidget": true,
            "reviewsDisplay": true,
            "availabilityCalendar": true,
            "servicesFromApi": true
        },

        "forms": {
            "quote": {
                "endpoint": "/leads",
                "successMessage": "Thanks! We'll contact you within 24 hours.",
                "redirectUrl": null
            },
            "contact": {
                "endpoint": "/inquiries",
                "successMessage": "Message sent! We'll be in touch soon.",
                "redirectUrl": null
            },
            "booking": {
                "endpoint": "/bookings",
                "successMessage": "Booking confirmed! Check your email for details.",
                "redirectUrl": "/booking-confirmed.html"
            }
        }
    }
}
```

### Generated JavaScript for SaaS Integration

Claude Code generates this integration code in `main.js`:

```javascript
// main.js - SaaS Integration (generated by Claude Code)

const SAAS_CONFIG = {
    apiBase: 'https://api.yoursaas.com/v1',
    publicKey: 'pk_live_xxxxxxxxxxxxx',
    companyId: 'comp_abc123'
};

// ============================================
// FORM SUBMISSIONS → SAAS
// ============================================

async function submitToSaas(endpoint, formData, successMessage) {
    try {
        const response = await fetch(`${SAAS_CONFIG.apiBase}${endpoint}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-Public-Key': SAAS_CONFIG.publicKey,
                'X-Company-ID': SAAS_CONFIG.companyId
            },
            body: JSON.stringify(formData)
        });

        if (!response.ok) throw new Error('Submission failed');

        showSuccess(successMessage);
        return await response.json();
    } catch (error) {
        showError('Something went wrong. Please try again or call us directly.');
        console.error('Form submission error:', error);
    }
}

// Quote Form
document.getElementById('quote-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = Object.fromEntries(new FormData(e.target));
    await submitToSaas('/leads', formData, 'Thanks! We\\'ll contact you within 24 hours.');
    e.target.reset();
});

// Contact Form
document.getElementById('contact-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = Object.fromEntries(new FormData(e.target));
    await submitToSaas('/inquiries', formData, 'Message sent! We\\'ll be in touch soon.');
    e.target.reset();
});

// ============================================
// FETCH DATA FROM SAAS → DISPLAY ON SITE
// ============================================

async function fetchFromSaas(endpoint) {
    try {
        const response = await fetch(`${SAAS_CONFIG.apiBase}/public${endpoint}`, {
            headers: {
                'X-Public-Key': SAAS_CONFIG.publicKey,
                'X-Company-ID': SAAS_CONFIG.companyId
            }
        });
        return await response.json();
    } catch (error) {
        console.error('Fetch error:', error);
        return null;
    }
}

// Load and display reviews
async function loadReviews() {
    const container = document.getElementById('reviews-container');
    if (!container) return;

    const reviews = await fetchFromSaas('/reviews?limit=6');
    if (!reviews?.length) return;

    container.innerHTML = reviews.map(review => `
        <div class="review-card">
            <div class="review-stars">${'★'.repeat(review.rating)}${'☆'.repeat(5 - review.rating)}</div>
            <p class="review-text">"${review.text}"</p>
            <p class="review-author">— ${review.customerName}</p>
        </div>
    `).join('');
}

// Load services from SaaS
async function loadServices() {
    const container = document.getElementById('services-container');
    if (!container) return;

    const services = await fetchFromSaas('/services');
    if (!services?.length) return;

    container.innerHTML = services.map(service => `
        <div class="service-card">
            <h3>${service.name}</h3>
            <p>${service.description}</p>
            ${service.price ? `<p class="service-price">Starting at $${service.price}</p>` : ''}
        </div>
    `).join('');
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    loadReviews();
    loadServices();
});

// ============================================
// UTILITY FUNCTIONS
// ============================================

function showSuccess(message) {
    // Show success toast/modal
    const toast = document.createElement('div');
    toast.className = 'toast toast-success';
    toast.textContent = message;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 5000);
}

function showError(message) {
    const toast = document.createElement('div');
    toast.className = 'toast toast-error';
    toast.textContent = message;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 5000);
}
```

### Required SaaS API Endpoints

Your SaaS product needs these public endpoints for website integration:

```
PUBLIC ENDPOINTS (authenticated via public key + company ID)
═══════════════════════════════════════════════════════════

POST   /api/v1/leads
       Create a new lead from website quote form
       Body: { name, email, phone, message, source: "website" }

POST   /api/v1/inquiries
       Create a general inquiry from contact form
       Body: { name, email, phone, message }

POST   /api/v1/bookings
       Create a booking/appointment
       Body: { name, email, phone, serviceId, date, time, notes }

GET    /api/v1/public/reviews
       Get company's approved reviews for display
       Query: ?limit=10&minRating=4
       Returns: [{ id, rating, text, customerName, date }]

GET    /api/v1/public/services
       Get company's public service list
       Returns: [{ id, name, description, price, duration }]

GET    /api/v1/public/availability
       Get available time slots for booking
       Query: ?serviceId=xxx&startDate=2026-01-20&endDate=2026-01-27
       Returns: [{ date, slots: ["09:00", "10:00", ...] }]

GET    /api/v1/public/testimonials
       Get featured testimonials
       Query: ?limit=3&featured=true
       Returns: [{ id, text, customerName, customerTitle }]

GET    /api/v1/public/company
       Get public company info (for schema markup, footer, etc.)
       Returns: { name, phone, email, address, hours, socialLinks }


AUTHENTICATION FOR PUBLIC ENDPOINTS
═══════════════════════════════════

Headers required:
  X-Public-Key: pk_live_xxxxx    (identifies the request is from a valid source)
  X-Company-ID: comp_abc123      (identifies which company's data to access)

These are PUBLIC keys - safe to include in client-side JavaScript.
They only allow read access to public data and creating leads/bookings.
```

### User Experience Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     COMPLETE USER JOURNEY                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   1. SAAS CUSTOMER (ABC Movers) signs up for your SaaS                     │
│      └──▶ Gets dashboard at app.yoursaas.com                               │
│      └──▶ Manages jobs, customers, invoices                                │
│                                                                             │
│   2. Clicks "Create Website" in SaaS dashboard                             │
│      └──▶ Redirects to Website Builder                                     │
│      └──▶ Company info pre-filled from SaaS                                │
│                                                                             │
│   3. Fills out intake questionnaire                                         │
│      └──▶ Style preferences, pages needed, etc.                            │
│                                                                             │
│   4. Claude Code generates website                                          │
│      └──▶ Static HTML/CSS/JS with SaaS integration baked in               │
│      └──▶ Forms configured to POST to SaaS API                            │
│      └──▶ Dynamic sections pull from SaaS                                  │
│                                                                             │
│   5. Preview & iterate                                                      │
│      └──▶ Request changes in natural language                              │
│      └──▶ Claude Code updates the site                                     │
│                                                                             │
│   6. Publish website                                                        │
│      └──▶ Choose hosting tier (subdomain or custom domain)                 │
│      └──▶ Site goes live                                                   │
│                                                                             │
│   7. END CUSTOMER visits abcmovers.com                                     │
│      └──▶ Browses services, reads reviews                                  │
│      └──▶ Fills out "Get Quote" form                                       │
│                                                                             │
│   8. Lead appears in ABC Movers' SaaS dashboard                            │
│      └──▶ They follow up, create job, send invoice                        │
│      └──▶ All in your SaaS product                                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## API Endpoints

```
Authentication
POST   /api/auth/register            Create account
POST   /api/auth/login               Login
POST   /api/auth/logout              Logout

Projects
POST   /api/projects                 Create new project
GET    /api/projects                 List user's projects
GET    /api/projects/:id             Get project details
PUT    /api/projects/:id             Update project
DELETE /api/projects/:id             Delete project

Generation
POST   /api/projects/:id/generate    Trigger Claude Code generation
GET    /api/projects/:id/status      Check generation status
POST   /api/projects/:id/revisions   Request changes
GET    /api/projects/:id/preview     Get preview URL

Publishing
POST   /api/projects/:id/publish     Publish to hosting
GET    /api/sites/:id                Get published site info
PUT    /api/sites/:id/domain         Configure custom domain
DELETE /api/sites/:id                Unpublish site

Assets
POST   /api/assets/upload            Upload image/logo
GET    /api/assets/:id               Get asset URL
DELETE /api/assets/:id               Delete asset

Billing
GET    /api/billing/plans            Get available plans
POST   /api/billing/subscribe        Subscribe to plan
POST   /api/billing/cancel           Cancel subscription
GET    /api/billing/invoices         Get invoice history
```

---

## Revenue Model

The website builder is a feature/add-on to your main SaaS product. Pricing can be bundled or separate.

### Option A: Bundled with SaaS Plans

| SaaS Plan | Website Included | Website Features |
|-----------|------------------|------------------|
| Starter ($49/mo) | Subdomain only | Basic site, lead capture |
| Pro ($99/mo) | Custom domain | Full site, booking widget, reviews |
| Enterprise ($249/mo) | Premium hosting | Everything + white-label |

### Option B: Website as Separate Add-On

| Website Add-On | Price | Features |
|----------------|-------|----------|
| Basic Website | +$15/mo | Subdomain, lead capture |
| Pro Website | +$29/mo | Custom domain, all integrations |
| Premium Website | +$49/mo | External hosting, best SEO |

### Standalone (Non-SaaS Customers)

| Tier | Price | Sites | Features |
|------|-------|-------|----------|
| Free | $0 | 1 | Subdomain only, "Built with" badge |
| Basic | $12/mo | 3 | Custom domain, SSL, no badge |
| Premium | $29/mo | 10 | External hosting (Vercel/Netlify), analytics |
| Agency | $99/mo | Unlimited | White-label, API access, priority support |

---

## Implementation Roadmap

### Phase 1: MVP
- [ ] Project structure setup
- [ ] Basic frontend (intake form, preview page)
- [ ] Claude Code integration (generate + revise)
- [ ] Free tier hosting (subdomain only)
- [ ] Simple preview system

### Phase 2: User Accounts & Billing
- [ ] User authentication
- [ ] Stripe integration
- [ ] Plan management
- [ ] Project dashboard

### Phase 3: Custom Domains
- [ ] DNS verification flow
- [ ] SSL automation (Let's Encrypt)
- [ ] Domain routing

### Phase 4: Premium Tier
- [ ] Vercel deployment integration
- [ ] Netlify deployment integration
- [ ] Cloudflare Pages integration

### Phase 5: Polish
- [ ] Asset management (image uploads)
- [ ] Analytics integration
- [ ] White-label options
- [ ] Agency features

---

## Tech Stack

| Component | Technology |
|-----------|------------|
| Frontend | Next.js or React |
| Backend | Node.js (Express/Fastify) |
| Database | PostgreSQL |
| File Storage | Cloudflare R2 or AWS S3 |
| Generation | Claude Code CLI |
| Hosting (Free/Basic) | Your VPS + Nginx/Caddy |
| Hosting (Premium) | Vercel/Netlify/Cloudflare Pages |
| SSL | Let's Encrypt (Certbot) |
| Payments | Stripe |
